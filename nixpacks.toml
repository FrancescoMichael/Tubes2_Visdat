# Simplified approach - let's try using the python provider without explicit nixpkgs
providers = ["node", "python"]

[variables]
NODE_VERSION = "18"
PYTHON_VERSION = "3.11"

[phases.build]
cmds = [
  "cd frontend && npm install && npm run build",
  "cd ..",
  # Download and install pip manually
  "curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py",
  "python3 get-pip.py --user",
  # Add user pip to PATH
  "export PATH=$HOME/.local/bin:$PATH",
  # Install backend requirements
  "cd backend && python3 -m pip install -r requirements.txt"
]

[phases.start]
cmd = "export PATH=$HOME/.local/bin:$PATH && cd backend && python3 import_data.py && python3 run.py"

[build]
buildCommand = "cd frontend && npm install && npm run build && cd ../backend && curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py && python3 get-pip.py --user && export PATH=$HOME/.local/bin:$PATH && python3 -m pip install -r requirements.txt"

[deploy]
startCommand = "export PATH=$HOME/.local/bin:$PATH && cd backend && python3 import_data.py && python3 run.py"